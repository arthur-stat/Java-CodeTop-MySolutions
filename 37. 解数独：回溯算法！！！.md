题目简述：

> 编写一个程序，通过填充空格来解决数独问题。
>
> 数独的解法需 **遵循如下规则**：
>
> 1. 数字 `1-9` 在每一行只能出现一次。
> 2. 数字 `1-9` 在每一列只能出现一次。
> 3. 数字 `1-9` 在每一个以粗实线分隔的 `3x3` 宫内只能出现一次。（请参考示例图）
>
> 数独部分空格内已填入了数字，空白格用 `'.'` 表示。

题目链接：[37. 解数独](https://leetcode.cn/problems/sudoku-solver/)

# 思路

回溯算法！！！

注意的小技巧是把数组当哈希表用——因为数据范围有限，这样效率最高。

# 代码

```java
class Solution {

    private char[][] board;
    private boolean[][] rowUsed;  // 参数一：行号，参数二：数字使用情况
    private boolean[][] colUsed;  // 参数一：列号，参数二：数字使用情况
    private boolean[][] sqUsed;   // 参数一：宫编号，参数二：数字使用情况

    public void solveSudoku(char[][] board) {
        this.board = board;
        rowUsed = new boolean[9][9];
        colUsed = new boolean[9][9];
        sqUsed = new boolean[9][9];

        // init
        for (int i = 0; i < 9; i++) {
            for (int j = 0; j < 9; j++) {
                char c = board[i][j];
                if (c != '.') {
                    rowUsed[i][c - '1'] = true;
                    colUsed[j][c - '1'] = true;
                    sqUsed[sqNumber(i, j)][c - '1'] = true;
                }
            }
        }

        int[] initIndex = board[0][0] == '.' ? new int[]{0, 0} : next(0, 0);
        dfs(initIndex[0], initIndex[1]);
    }

    private boolean dfs(int i, int j) {
        int sqNumber = sqNumber(i, j);
        for (int num = 0; num < 9; num++) {
            if (!rowUsed[i][num] && !colUsed[j][num] && !sqUsed[sqNumber][num]) {
                rowUsed[i][num] = true;
                colUsed[j][num] = true;
                sqUsed[sqNumber][num] = true;
                board[i][j] = (char) ('1' + num);

                int[] next = next(i, j);
                if (next[0] == -1) return true;
                if (dfs(next[0], next[1])) return true;

                rowUsed[i][num] = false;
                colUsed[j][num] = false;
                sqUsed[sqNumber][num] = false;
                board[i][j] = '.';
            }
        }

        return false;
    }

    private int sqNumber(int i, int j) {
        int count = 0;

        if (i >= 3 && i < 6) {
            count += 3;
        } else if (i >= 6) {
            count += 6;
        }

        if (j >= 3 && j < 6) {
            count += 1;
        } else if (j >= 6) {
            count += 2;
        }

        return count;
    }

    private int[] next(int i, int j) {
        for (int col = j + 1; col < 9; col++) {
            if (board[i][col] == '.') {
                return new int[]{i, col};
            }
        }

        for (int row = i + 1; row < 9; row++) {
            for (int col = 0; col < 9; col++) {
                if (board[row][col] == '.') {
                    return new int[]{row, col};
                }
            }
        }

        return new int[]{-1, -1};
    }
}
```

