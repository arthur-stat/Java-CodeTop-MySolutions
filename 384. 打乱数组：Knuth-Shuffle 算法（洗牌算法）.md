题目简述：

> 给你一个整数数组 `nums` ，设计算法来打乱一个没有重复元素的数组。打乱后，数组的所有排列应该是 **等可能** 的。
>
> 实现 `Solution` class:
>
> - `Solution(int[] nums)` 使用整数数组 `nums` 初始化对象
> - `int[] reset()` 重设数组到它的初始状态并返回
> - `int[] shuffle()` 返回数组随机打乱后的结果

题目链接：[384. 打乱数组](https://leetcode.cn/problems/shuffle-an-array/)

# 思路

从后往前，每个元素与其左侧（包括自身）的一个元素进行交换。

等可能性需要进行严格的数学证明，这里略去。

# 代码

```java
class Solution {

    private final Random rand = new Random();
    private final int[] init;

    public Solution(int[] nums) {
        init = new int[nums.length];
        System.arraycopy(nums, 0, init, 0, nums.length);
    }
    
    public int[] reset() {
        int[] res = new int[init.length];
        System.arraycopy(init, 0, res, 0, init.length);
        return res;
    }
    
    public int[] shuffle() {
        int[] res = new int[init.length];
        System.arraycopy(init, 0, res, 0, init.length);

        for (int i = res.length - 1; i > 0; i--) {
            swap(res, i, rand.nextInt(i + 1));
        }

        return res;
    }

    private void swap(int[] nums, int i, int j) {
        int tmp = nums[i];
        nums[i] = nums[j];
        nums[j] = tmp;
    }
}

/**
 * Your Solution object will be instantiated and called as such:
 * Solution obj = new Solution(nums);
 * int[] param_1 = obj.reset();
 * int[] param_2 = obj.shuffle();
 */
```

